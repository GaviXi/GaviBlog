import{_ as n,p as s,q as a,Y as t}from"./framework-e1bed10d.js";const p="/GaviBlog/assets/default_List_constructor-1-e96d0aa9.png",e="/GaviBlog/assets/default_List_constructor-2-fb82f9f8.png",c="/GaviBlog/assets/default_List_constructor-3-8559ac5b.png",o="/GaviBlog/assets/default_List_constructor-4-b00028a5.png",l={},i=t('<h1 id="can-t-use-the-default-list-constructor" tabindex="-1"><a class="header-anchor" href="#can-t-use-the-default-list-constructor" aria-hidden="true">#</a> Can&#39;t use the default List constructor.</h1><p><img src="'+p+`" alt=""></p><p>这是由于 Dart 中包含了一项名为“<strong>Null Safety</strong>”的安全检查，该功能使得变量不能具有“null”值。</p><p>解决方案：</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在Flutter2.1.2后，new List()方法已弃用</p><p><img src="`+e+`" alt=""></p><p>替换方案</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span>growable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>growable 为 false 是为 固定长度列表，为 true 是为 长度可变列表</p><p><strong>创建给定长度的列表</strong></p><p>要创建具有给定长度的可增长列表，对于可为空元素类型，只需在创建后立即分配长度：</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
    list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">&#39;li&#39;</span></span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+c+`" alt=""></p><p>对于不可为空的元素类型，替代方法如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>List&lt;int&gt; growableList = List&lt;int&gt;.filled(3, 0, growable: true);
List&lt;String&gt; list = List&lt;String&gt;.filled(3, &quot;&quot;, growable: true);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+'" alt=""></p>',19),u=[i];function r(d,k){return s(),a("div",null,u)}const g=n(l,[["render",r],["__file","default_List_constructor.html.vue"]]);export{g as default};
